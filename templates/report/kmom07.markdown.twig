Kmom 07-10
--------

#### Krav 1, 2, och 3
Jag började hela uppgiften med att försöka bestämma vad jag skulle göra. Äventyrsspelet verkade jättecoolt, men jag kände att jag nog inte skulle ha nog med tid för att hinna slutföra ett sånt projekt. Speciellt då jag hade velat rita upp grafiken själv. Istället bestämde jag mig för att skapa pokerspelet. Jag kan inte spela poker, och när jag försökte förstå mig på reglerna så bara snurrade det, så det hela slutade med att jag valde att skapa ett annat kortspel, plump. Det spelar jag ofta med min mormor och morfar, och där kände jag mig säker på reglerna.

Nu när jag visste vad jag skulle göra så började jag lägga upp en struktur. Jag återanvände alla klasserna som hade med kort och kortlekar att göra från kursen, och la till extra funktioner där jag behövde dem. I controllerna la jag till routes för de olika delarna av spelet, och byggde upp en ny bas-template. Den fick använda sig av en ny css fil, där färgtemat är anpassat efter Viking Line. Eftersom jag har spelat så mycket kortspel med mormor och morfar så har jag börjat associera det med Finland (där de kommer ifrån), och när vi åker dit så tar vi alltid färjan. Så plump == viking line för mig.

Nu hade jag en bas att stå på, så då började jag själva kodningen av spelet. Jag började med att försöka få en runda att fungera, för då kunde jag fokusera på att få den att kunna köra flera rundor senare. Det var lite krångligt att försöka komma på hur det hela skulle se ut, och jag hade många knappar som till sist inte längre behövdes och kunde tas bort. Först gjore jag funktioner som kunde ge ut kort till spelare. Därefter behövde jag att en spelare kunde lägga ett kort på nåt sätt, och eftersom mina kort är knappar så gjorde jag det enkelt och skickade med knappens värde när man klickade på den. Det visade sig dock vara lite mer komplicerat än att bara få ut kortet på "andra sidan". Efter en hel del strul med hur jag skulle få fatt i den utan att behöva ha 52 olika if-satser så kom jag ihåg att $_POST är en array som innehåller allt som skickas med. Eftersom knapparna låg i sitt egna formulär så var det endast värdet av den knappen som klickades som skickades med, så jag kunde sätta att kort skulle vara $_POST. För att kunna matcha det som skickades med knappen och ett kort-objekt så skapade jag några nya funktioner. Alla kort fick nu en matchings-sträng och Play hade nu en funktion för att kunna ta den strängen och skicka tillbaka ett kort-objekt.

Nu kunde spelaren lägga ett kort, men inte datorn. För att fixa detta så skapade jag en ny klass, ComputerPlayer, som extendade Player-klassen. Jag väntade med att koda funktionerna tills det behövdes, men gav den två tomma funktioner. En för att gissa hur många stick den kunde ta, och en för att välja ett kort att lägga. Här måste den även följa reglerna.

Innan jag fortsatte med den klassen så såg jag till att man kunde satsa hur många stick man kommer att ta. Här tillkom det lite grejer i Player-klassen, både för bettingen och för att kunna hålla koll på poängen. Nu la jag till kod i datorns funktioner. Efter det så fixade jag en massa "småsaker", så som vem som ska börja rundan, vem som vinner, poäng, och nedsparning av poäng i databasen via orm.

Databasen är inte speciellt avancerad, allt den gör är att spara ner "Spelare" och sen vilken poäng man har fått. Jag har lämnat lite inlägg där i så att man kan se nåt i high score fliken. Eftersom ett spel är 20 rundor så har jag inte kärt ett helt spel för de saker som är sparade där i, istället så har jag bytt ut rundorna till bara en eller två mindre rundor. Om du som rättar vill göra det samma så är det $rounds i Play-klassen som kan bytas till [5, 5] eller liknande för att få ett kortare spel.

Det sista jag gjorde med själva spelet var att gå igenom allt med linters och liknande. Jag försökte få ner komplexiteten ganska mycket. Mer om detta i Genomföring.

#### Krav 4
För krav 4 så valde jag att skriva en kort uppsats om snygg kod. Jag började med att lägga till den route som behövdes, och sen började jag skriva. De olika styckena i uppsatsen är inspirerade av de olika mätvärdena. De korrelerar inte helt och håller med dem, men jag ville få med hur de olika delarna påverkas av och påverkar snygg kod. Sen skrev jag även lite om vad snygg kod betyder för mig, om jag tycker att det är viktigt, och om snygg och bra kod är samma sak. Jag tog även upp testbarheten då jag tycker att det är en viktig del att tänka på.

#### Genomföring
Till en början så kändes det som ett rimligt projekt, men när jag väl satte mig ner för att börja så insåg jag snabbt omfattningen. Jag tror att jag kanske tog mig lite vatten över huvudet när jag valde att göra plump, men jag kan inte tänka mig att andra spel skulle vara mindre komplexa. Nu när jag har en "spelgrund" så kan jag tänka mig att det vore någorlunda lätt att implementera andra spel, för nu finns själva spelplanen.

Jag hade en hel del strul under projektets gång. Till exempel problemet med att få tag i vilket kort som blev klickat på. Lintarna gillade inte att jag använde en global variabel, så därför har jag stängt av den varningen. Många delar av min kod blev också ganska komplex, och jag jobbade mycket på slutet med att får ner komplexiteten. För att lyckas med detta så delade jag upp större funktioner till många små. Det enda stället där jag inte riktigt lyckades få ner den nog är is själva huvudrouten för spelet, plump. Jag tror nu att det bästa nog hade varit att skapa en klass till och lägga in mycket av koden i den. Men risken är att det blir ett "gud-objekt", vilket phpmetrics varnade mig att Play-klassen hade blivit. Jag lyckades lösa den biten genom att flytta på två funktioner som inte behövde ligga där egentligen. 

Jag är riktigt nöjd med mina tester. Vissa assertions hade kunnat vara lite mer passande, men jag har 100% kodteckning för projektet. Vissa av testerna fungerade fortfarande för basklasserna, så de har jag bara kopierat över. Men det finns så många nya funktioner och klasser överlag att det mesta är helt nytt.

Det jag inte är jättenöjd med är att jag fick ignorera några fel i controllern där phpmd inte gillade hur vissa saker var typeade. Det verkar som att när man hämtar någonting från session så kommer den ut som mixed, hur man än försöker jonglera med typerna och casta om dem. Speciellt när man vill ha ut dem till ett egendefinierat objekt. När jag vardumpade typen så fick jag inte heller ut att den var mixed, vilket gjorde mig ännu mer förbryllad. Förutom session-sparade variablers types så fick jag ignorera att den trodde att metoder inte fanns. De två metoderna som ligger i ComputerPlayer tyckte phpmd skulle finnas i Player, men ComputerPlayer extendar Player. Jag hittade lite om det på nätet, och man skulle lägga till något om static/this i returnen, men jag returnerar aldrig själva objektet, endast ett kort eller ett nummer. Så hur jag än försökte så fick jag inte till det.

Då det mesta jag behövde kunna för att klara det här projektet är sånt som vi har gått igenom eller redan övat på i tidigare kursmoment så tycker jag att det är ett rimligt projekt för kursen. Det var lagom "jobbigt", man var tvungen att tänka och klura men när man fastnade så lyckades man alltid komma förbi det efter några timmar. Ibland händer det att man kan fastna rätt hårt men det hände inte så mycket under projektet, vilket var bra. Då slapp man känna sig lika stressad och frustrerad som lätt händer annars.

#### Avslutning
Den här kursen har varit bra. Efter den förra phpkursen så kännde jag mig ganska förvirrad över hur språket fungerade, men nu känner jag mig hemma i det. Det är kul att nu ha en hel sida av saker som man har skapat, och spel är sånt man kan visa upp till folk när de undrar vad det är man gör om dagarna. Ibland har det känns som att det har blivit lite mycket, men eftersom det är en återkommande grej för mig så tror jag att det beror mer på mig än kursmaterialet. Handledningen är bra, jag gillar videorna och instruktionerna är oftast klara och tydliga. Det betyder väldigt mycket att ha tillgång till lärarna via discord, man känner sig aldrig oförmögen att kommunicera eller få svar på frågor. Den här kursen skulle få en 10:a av mig, då jag är nöjd. Jag skulle absolut föreslå den här kursen till folk som är intresserade.
